<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>variabili-aleatorie – IML</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-d1aacd23651da4810371d54805babc2f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../th/01. Richiami di probabilità.html">Theory</a></li><li class="breadcrumb-item"><a href="../th/02. Variabili aleatorie.html">Variabili Aleatorie</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">IML</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Theory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/01. Richiami di probabilità.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Richiami di Probabilità</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/02. Variabili aleatorie.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Variabili Aleatorie</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/03. Modelli di variabili aleatorie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modelli di variabili aleatorie</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/04. La distribuzione delle statistiche campionarie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">La distribuzione delle statistiche campionarie</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/05. Stima parametrica.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stima parametrica</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/06. Verifica delle ipotesi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Verifica delle ipotesi</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/07. Vettori aleatori.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vettori aleatori</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/08. Trasformazione PCA e analisi delle componenti principali.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trasformazione PCA e analisi delle componenti principali</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/09. Funzioni di Perdita e Inferenza Statistica.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Funzioni di Perdita e Inferenza Statistica</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/10. Ancora sul teorema di Cochran.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ancora sul teorema di Cochran</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/11. Selezione di Variabili e Regolarizzazione nella Regressione.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Selezione di Variabili e Regolarizzazione nella Regressione</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/12. Gestione delle Variabili.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gestione delle Variabili</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/13. Regressione Logistica.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regressione Logistica</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/14. Analisi della varianza (ANOVA).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analisi della varianza (ANOVA)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/15. ANOVA a due vie (con o senza repliche).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ANOVA a due vie (con o senza repliche)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../th/16. Test del Chi-quadro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Test del Chi-quadro</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Laboratory</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lab/01_02_Introduzione.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01-02: Introduzione</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lab/03_04_Gaussiane.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03-04: Gaussiane</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lab/05_06_Limite_Centrale.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05-06: Limite Centrale</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lab/07_08_EDA_PCA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">07-08: EDA e PCA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lab/09_10_Generazione_campioni.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">09-10: Generazione campioni da distribuzione scelta</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lab/11_12_MLE_Regressione_Abalone.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11-12: MLE e Regressione Abalone</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lab/13_14_Outlier_Regressione.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">13-14: Outlier e Regressione</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lab/15_16_OLS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">15-16: OLS</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Exams</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../exams/esame_1_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01-01: Analisi distribuzione Dirichlet</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../exams/esame_1_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01-02: EDA e PCA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../exams/esame_1_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01-03: Classificazione Logistic Regression e PyTorch</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../exams/esame_1_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01-04: Regressione con OLS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../exams/esame_1_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01-05: Minimizzazione con SciPy</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#variabili-aleatorie" id="toc-variabili-aleatorie" class="nav-link active" data-scroll-target="#variabili-aleatorie">Variabili Aleatorie</a>
  <ul class="collapse">
  <li><a href="#funzioni-di-massa-e-densità" id="toc-funzioni-di-massa-e-densità" class="nav-link" data-scroll-target="#funzioni-di-massa-e-densità">Funzioni di massa e densità</a></li>
  <li><a href="#coppie-e-vettori-di-variabili-aleatorie" id="toc-coppie-e-vettori-di-variabili-aleatorie" class="nav-link" data-scroll-target="#coppie-e-vettori-di-variabili-aleatorie">Coppie e vettori di variabili aleatorie</a></li>
  <li><a href="#valore-atteso" id="toc-valore-atteso" class="nav-link" data-scroll-target="#valore-atteso">Valore atteso</a></li>
  <li><a href="#varianza" id="toc-varianza" class="nav-link" data-scroll-target="#varianza">Varianza</a></li>
  <li><a href="#covarianza-e-varianza-della-somma-di-variabili-aleatorie" id="toc-covarianza-e-varianza-della-somma-di-variabili-aleatorie" class="nav-link" data-scroll-target="#covarianza-e-varianza-della-somma-di-variabili-aleatorie">Covarianza e varianza della somma di variabili aleatorie</a></li>
  <li><a href="#legge-debole-dei-grandi-numeri" id="toc-legge-debole-dei-grandi-numeri" class="nav-link" data-scroll-target="#legge-debole-dei-grandi-numeri">Legge debole dei grandi numeri</a></li>
  <li><a href="#generare-dati-data-una-distribuzione-di-probabilità" id="toc-generare-dati-data-una-distribuzione-di-probabilità" class="nav-link" data-scroll-target="#generare-dati-data-una-distribuzione-di-probabilità">Generare dati data una distribuzione di probabilità</a></li>
  <li><a href="#studiare-la-distribuzione-di-un-campione" id="toc-studiare-la-distribuzione-di-un-campione" class="nav-link" data-scroll-target="#studiare-la-distribuzione-di-un-campione">Studiare la distribuzione di un campione</a></li>
  <li><a href="#diagramma-q-q" id="toc-diagramma-q-q" class="nav-link" data-scroll-target="#diagramma-q-q">Diagramma Q-Q</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../th/01. Richiami di probabilità.html">Theory</a></li><li class="breadcrumb-item"><a href="../th/02. Variabili aleatorie.html">Variabili Aleatorie</a></li></ol></nav></header>




<section id="variabili-aleatorie" class="level1">
<h1>Variabili Aleatorie</h1>
<p>Le quantità di interesse determinate dall’esito di un esperimento casuale sono dette <strong>variabili aleatorie</strong>. Poiché il valore di una variabile aleatoria dipende dall’esito dell’esperimento, è possibile associare una probabilità ai suoi possibili valori.</p>
<p>La <strong>funzione di ripartizione</strong> <span class="math inline">\(F\)</span> (o <strong>CDF</strong>, Cumulative Distribution Function) di una variabile aleatoria <span class="math inline">\(X\)</span> è definita, per ogni numero reale <span class="math inline">\(i\)</span>, come:</p>
<p><span class="math display">\[
F(i) = P(X \leq i)
\]</span></p>
<p>Quindi, <span class="math inline">\(F(i)\)</span> esprime la <strong>probabilità</strong> che <span class="math inline">\(X\)</span> assuma un valore <strong>minore o uguale</strong> a <span class="math inline">\(i\)</span>. Si utilizza la notazione <span class="math inline">\(X \sim F\)</span> per indicare che <span class="math inline">\(F\)</span> è la funzione di ripartizione di <span class="math inline">\(X\)</span>.</p>
<p>Le variabili aleatorie che possono assumere un numero <strong>finito</strong> o <strong>numerabile</strong> di valori sono dette <strong>discrete</strong>, mentre quelle che possono assumere un insieme continuo (<strong>infinito non numerabile</strong>) di valori sono dette <strong>continue</strong>.</p>
<p>La funzione di ripartizione ha utili applicazioni sia nel caso continuo</p>
<p>![[Pasted image 20250301180012 1.png]]</p>
<p>che in quello discreto</p>
<p>![[Pasted image 20250301180203 1.png]]</p>
<p>Inoltre, calcolando l’inverso della funzione di ripartizione, è possibile individuare i percentili di una distribuzione di probabilità.</p>
<section id="funzioni-di-massa-e-densità" class="level2">
<h2 class="anchored" data-anchor-id="funzioni-di-massa-e-densità">Funzioni di massa e densità</h2>
<p>Se <span class="math inline">\(X\)</span> è una variabile aleatoria <strong>discreta</strong>, la sua <strong>funzione di massa di probabilità</strong> (o <strong>PMF</strong>, Probability Mass Function) è definita come:</p>
<p><span class="math display">\[
p(a) = P(X = a)
\]</span></p>
<p><strong>Nota:</strong> Poiché <span class="math inline">\(X\)</span> deve assumere uno dei valori <span class="math inline">\(x_1, x_2, \dots\)</span>, la funzione di massa di probabilità deve soddisfare la seguente condizione:</p>
<p><span class="math display">\[
\sum_{i} p(x_i) = 1
\]</span></p>
<p>Se <span class="math inline">\(X\)</span> è una variabile aleatoria <strong>continua</strong>, definita su tutto <span class="math inline">\(\mathbb{R}\)</span>, per ogni insieme misurabile <span class="math inline">\(B\)</span> di numeri reali vale:</p>
<p><span class="math display">\[
P(X \in B) = \int_B f(x) \, dx
\]</span></p>
<p><strong>Nota:</strong> Analogamente alla funzione di massa di probabilità, la funzione di densità deve soddisfare la condizione:</p>
<p><span class="math display">\[
\int_{-\infty}^{+\infty} f(x) \, dx = 1
\]</span></p>
<p>Quando si conosce la <strong>funzione di massa</strong> di una variabile aleatoria discreta, la <strong>funzione di densità</strong> di una variabile continua, o la <strong>funzione di ripartizione</strong> di una variabile aleatoria qualsiasi, si hanno informazioni sufficienti per calcolare la probabilità di qualsiasi evento dipendente da quella variabile. In tal caso, si dice che è nota la <strong>distribuzione</strong> della variabile considerata. Inoltre, dire che due variabili aleatorie <span class="math inline">\(X\)</span> e <span class="math inline">\(Y\)</span> hanno la stessa distribuzione equivale a dire che le loro funzioni sopra citate sono identiche.</p>
</section>
<section id="coppie-e-vettori-di-variabili-aleatorie" class="level2">
<h2 class="anchored" data-anchor-id="coppie-e-vettori-di-variabili-aleatorie">Coppie e vettori di variabili aleatorie</h2>
<p>Siano <span class="math inline">\(X\)</span> e <span class="math inline">\(Y\)</span> due variabili aleatorie relative allo stesso esperimento. La <strong>funzione di ripartizione congiunta</strong> di <span class="math inline">\(X\)</span> e <span class="math inline">\(Y\)</span> è definita come:</p>
<p><span class="math display">\[
F(a, b) = P(X \leq a, Y \leq b)
\]</span></p>
<p><strong>Nota:</strong> La virgola nell’argomento di <span class="math inline">\(P\)</span> rappresenta l’<strong>intersezione</strong> tra i due eventi.</p>
<p>Se <span class="math inline">\(X\)</span> e <span class="math inline">\(Y\)</span> sono variabili aleatorie discrete, la loro <strong>funzione di massa congiunta</strong> è:</p>
<p><span class="math display">\[
p(x_i, y_j) = P(X = x_i, Y = y_j)
\]</span></p>
<p>Due variabili aleatorie sono <strong>congiuntamente continue</strong> se esiste una funzione <span class="math inline">\(f(x, y)\)</span> non negativa tale che, per ogni sottoinsieme misurabile <span class="math inline">\(C\)</span> del piano cartesiano, vale:</p>
<p><span class="math display">\[
P\big((X, Y) \in C\big) = \iint_{(x, y) \in C} f(x, y) \, dx \, dy
\]</span></p>
<p>La funzione <span class="math inline">\(f(x, y)\)</span> è detta <strong>densità congiunta</strong> di <span class="math inline">\(X\)</span> e <span class="math inline">\(Y\)</span>.</p>
<p>Ad esempio, se <span class="math inline">\(X\)</span> rappresenta l’altezza di una persona e <span class="math inline">\(Y\)</span> il suo peso, la densità congiunta <span class="math inline">\(f_{X,Y}(a, b)\)</span> indica quanto è probabile che una persona scelta a caso abbia altezza <span class="math inline">\(a\)</span> e peso <span class="math inline">\(b\)</span>. Maggiore è il valore di <span class="math inline">\(f\)</span> in un punto <span class="math inline">\((a, b)\)</span>, maggiore è la probabilità di osservare quella particolare combinazione di altezza e peso. Integrando <span class="math inline">\(f\)</span> su un’area specifica, otteniamo la probabilità che altezza e peso cadano in quell’intervallo. Ad esempio, integrando su altezze tra 160 cm e 170 cm e pesi tra 60 kg e 70 kg, si ottiene la probabilità che una persona abbia altezza e peso in quegli intervalli.</p>
<p>In generale, due variabili prese contemporaneamente hanno una <strong>distribuzione congiunta</strong>. Una distribuzione congiunta di variabili gaussiane, ha spesso forma ellittica</p>
<p>![[Pasted image 20250301171038 1.png|300]]</p>
<p>Due variabili aleatorie relative allo stesso esperimento si dicono <strong>indipendenti</strong> se, per ogni coppia di insiemi misurabili <span class="math inline">\(A\)</span> e <span class="math inline">\(B\)</span>, vale:</p>
<p><span class="math display">\[
P(X \in A, Y \in B) = P(X \in A) \cdot P(Y \in B)
\]</span></p>
<p>In caso contrario, si dicono <strong>dipendenti</strong>. Questa definizione è equivalente alla richiesta che, per ogni coppia di numeri reali <span class="math inline">\(a\)</span> e <span class="math inline">\(b\)</span>:</p>
<p><span class="math display">\[
P(X \leq a, Y \leq b) = P(X \leq a) \cdot P(Y \leq b)
\]</span></p>
<p>ovvero, che la <strong>funzione di ripartizione congiunta</strong> sia uguale al prodotto delle <strong>funzioni di ripartizione marginali</strong>:</p>
<p><span class="math display">\[
F(a, b) = F_X(a) \cdot F_Y(b)
\]</span></p>
<p>Se le variabili considerate sono discrete, l’indipendenza è equivalente a richiedere che la <strong>funzione di massa congiunta</strong> sia uguale al prodotto delle <strong>funzioni di massa marginali</strong>:</p>
<p><span class="math display">\[
p(a, b) = p_X(a) \cdot p_Y(b)
\]</span></p>
</section>
<section id="valore-atteso" class="level2">
<h2 class="anchored" data-anchor-id="valore-atteso">Valore atteso</h2>
<p>Se <span class="math inline">\(X\)</span> è una variabile aleatoria <strong>discreta</strong> che può assumere i valori <span class="math inline">\(x_1, x_2, \dots\)</span>, il <strong>valore atteso</strong> di <span class="math inline">\(X\)</span>, indicato con <span class="math inline">\(E[X]\)</span>, è (se esiste) dato da:</p>
<p><span class="math display">\[
E[X] = \sum_{i} x_i \cdot P(X = x_i)
\]</span></p>
<p><span class="math inline">\(E[X]\)</span> è anche detto <strong>media</strong> o <strong>aspettazione</strong> di <span class="math inline">\(X\)</span>, e rappresenta la media ponderata dei valori possibili di <span class="math inline">\(X\)</span>, usando come pesi le probabilità associate.</p>
<p><strong>Nota:</strong> <span class="math inline">\(E[X]\)</span> non è necessariamente uguale a uno dei valori possibili di <span class="math inline">\(X\)</span>.</p>
<p>Se <span class="math inline">\(X\)</span> è una variabile aleatoria <strong>continua</strong> con densità <span class="math inline">\(f(x)\)</span>, il valore atteso di <span class="math inline">\(X\)</span> è (se esiste):</p>
<p><span class="math display">\[
E[X] = \int_{-\infty}^{+\infty} x \cdot f(x) \, dx
\]</span></p>
<p>In pratica, il concetto di valore atteso è analogo a quello fisico del baricentro, ma applicato alle distribuzioni di probabilità.</p>
<p>Per <span class="math inline">\(n = 1, 2, \dots\)</span>, la quantità <span class="math inline">\(E[X^n]\)</span> è detta, se esiste, <strong>momento di ordine <span class="math inline">\(n\)</span></strong> della variabile <span class="math inline">\(X\)</span>. In particolare:</p>
<p><span class="math display">\[
E[X^n] =
\begin{cases}
\sum_{i} x_i^n \cdot p(x_i), &amp; \text{se } X \text{ è discreta} \\
\int_{-\infty}^{+\infty} x^n \cdot f(x) \, dx, &amp; \text{se } X \text{ è continua}
\end{cases}
\]</span></p>
<p>Di conseguenza, <span class="math inline">\(E[X]\)</span> è il momento di primo ordine di <span class="math inline">\(X\)</span>. Inoltre, vale la proprietà:</p>
<p><span class="math display">\[
E[X + Y] = E[X] + E[Y]
\]</span></p>
</section>
<section id="varianza" class="level2">
<h2 class="anchored" data-anchor-id="varianza">Varianza</h2>
<p>Data una variabile aleatoria <span class="math inline">\(X\)</span> con media <span class="math inline">\(\mu = E[X]\)</span>, la <strong>varianza</strong> di <span class="math inline">\(X\)</span> è, se esiste, definita come:</p>
<p><span class="math display">\[
\operatorname{Var}(X) = E\big[(X - \mu)^2\big]
\]</span></p>
<p>Esiste una formula alternativa per calcolare la varianza:</p>
<p><span class="math display">\[
\operatorname{Var}(X) = E[X^2] - [E[X]]^2
\]</span></p>
<p>La quantità <span class="math inline">\(\sigma = \sqrt{\operatorname{Var}(X)}\)</span> è detta <strong>deviazione standard</strong> della variabile aleatoria <span class="math inline">\(X\)</span>.</p>
</section>
<section id="covarianza-e-varianza-della-somma-di-variabili-aleatorie" class="level2">
<h2 class="anchored" data-anchor-id="covarianza-e-varianza-della-somma-di-variabili-aleatorie">Covarianza e varianza della somma di variabili aleatorie</h2>
<p>Date le variabili aleatorie <span class="math inline">\(X\)</span> e <span class="math inline">\(Y\)</span> con medie <span class="math inline">\(\mu_X\)</span> e <span class="math inline">\(\mu_Y\)</span>, la <strong>covarianza</strong> di <span class="math inline">\(X\)</span> e <span class="math inline">\(Y\)</span> è, se esiste, la quantità:</p>
<p><span class="math display">\[
\operatorname{Cov}(X, Y) = E\big[(X - \mu_X)(Y - \mu_Y)\big]
\]</span></p>
<p>Anche in questo caso, esiste una formula alternativa per calcolare la covarianza:</p>
<p><span class="math display">\[
\operatorname{Cov}(X, Y) = E[XY] - E[X] \cdot E[Y]
\]</span></p>
<p>Inoltre, se <span class="math inline">\(X\)</span> e <span class="math inline">\(Y\)</span> sono variabili aleatorie indipendenti, allora:</p>
<p><span class="math display">\[
E[XY] = E[X] \cdot E[Y]
\]</span></p>
<p>e quindi:</p>
<p><span class="math display">\[
\operatorname{Cov}(X, Y) = 0
\]</span></p>
<p>Data la somma di due variabili aleatorie <span class="math inline">\(X\)</span> e <span class="math inline">\(Y\)</span>, vale:</p>
<p><span class="math display">\[
\operatorname{Var}(X + Y) = \operatorname{Var}(X) + \operatorname{Var}(Y) + 2 \cdot \operatorname{Cov}(X, Y)
\]</span></p>
<p>Se <span class="math inline">\(X\)</span> e <span class="math inline">\(Y\)</span> sono indipendenti, allora:</p>
<p><span class="math display">\[
\operatorname{Var}(X + Y) = \operatorname{Var}(X) + \operatorname{Var}(Y)
\]</span></p>
<p>Inoltre, date le variabili aleatorie <span class="math inline">\(X_1, X_2, \dots, X_n\)</span>:</p>
<p><span class="math display">\[
\operatorname{Var}\left(\sum_{i=1}^{n} X_i\right) = \sum_{i=1}^{n} \operatorname{Var}(X_i) + 2 \sum_{1 \leq i &lt; j \leq n} \operatorname{Cov}(X_i, X_j)
\]</span></p>
<p>Se <span class="math inline">\(X_1, X_2, \dots, X_n\)</span> sono tutte indipendenti, allora:</p>
<p><span class="math display">\[
\operatorname{Var}\left(\sum_{i=1}^{n} X_i\right) = \sum_{i=1}^{n} \operatorname{Var}(X_i)
\]</span></p>
<p><strong>Casi particolari.</strong> Di seguito sono mostrati alcuni casi particolari:</p>
<ul>
<li><span class="math inline">\(\operatorname{Var}(aX + bY) = a^2 \operatorname{Var}(X) + b^2 \operatorname{Var}(Y) + 2ab \operatorname{Cov}(X, Y)\)</span></li>
<li><span class="math inline">\(\operatorname{Var}(X - Y) = \operatorname{Var}(X) + \operatorname{Var}(Y) - 2 \operatorname{Cov}(X, Y)\)</span></li>
<li><span class="math inline">\(\operatorname{Var}(a + bX) = b^2 \operatorname{Var}(X)\)</span></li>
</ul>
<p>In generare, si può mostrare che un valore positivo di <span class="math inline">\(Cov(X,Y)\)</span> indica che <span class="math inline">\(X\)</span> ed <span class="math inline">\(Y\)</span> tendenzialmente assumono valori grandi o piccoli contemporaneamente. La “forza” della relazione tra <span class="math inline">\(X\)</span> ed <span class="math inline">\(Y\)</span> è misurata più propriamente dal <strong>coefficiente di correlazione lineare</strong>, un numero puro (senza unità di misura) che tiene conto anche delle deviazioni standard di <span class="math inline">\(X\)</span> ed <span class="math inline">\(Y\)</span>. Esso si indica con <span class="math inline">\(Corr(X,Y)\)</span> ed è definito come</p>
<p><span class="math display">\[
Corr(X,Y) := \dfrac{Cov(X,Y)}{\sqrt{Var(X) \cdot Var(Y)}}
\]</span></p>
<p>Si può inoltre dimostrare che questa quantità è sempre compresa tra <span class="math inline">\(-1\)</span> e <span class="math inline">\(+1\)</span>.</p>
</section>
<section id="legge-debole-dei-grandi-numeri" class="level2">
<h2 class="anchored" data-anchor-id="legge-debole-dei-grandi-numeri">Legge debole dei grandi numeri</h2>
<p><strong>Disuguaglianza di Markov.</strong> Se <span class="math inline">\(X\)</span> è una variabile aleatoria che non è mai negativa, allora per ogni <span class="math inline">\(a &gt; 0\)</span></p>
<p><span class="math display">\[
P(X \ge a) \le \dfrac{E[X]}{a}
\]</span></p>
<p><strong>Disuguaglianza di Chebyshev.</strong> Se <span class="math inline">\(X\)</span> è una variabile aleatoria con media <span class="math inline">\(\mu\)</span> e varianza <span class="math inline">\(\sigma^2\)</span>, allora per ogni <span class="math inline">\(r&gt;0\)</span></p>
<p><span class="math display">\[
P(|X - \mu| \ge r ) \le \dfrac{\sigma^2}{r^2}
\]</span></p>
<p><strong>Legge debole dei grandi numeri.</strong> Sia <span class="math inline">\(X_1, \dots, X_n\)</span> una successione di variabili aleatorie i.i.d (indipendenti e identicamente distribuite), tutte con media <span class="math inline">\(E[X_i] = \mu\)</span>. Allora, per ogni <span class="math inline">\(\varepsilon &gt; 0\)</span>,</p>
<p><span class="math display">\[
P\left(\left\vert \dfrac{X_1 + \dots + X_n}{n} - \mu \right\vert &gt; \varepsilon\right) \rightarrow 0\]</span> quando <span class="math inline">\(n \rightarrow \infty\)</span>.</p>
</section>
<section id="generare-dati-data-una-distribuzione-di-probabilità" class="level2">
<h2 class="anchored" data-anchor-id="generare-dati-data-una-distribuzione-di-probabilità">Generare dati data una distribuzione di probabilità</h2>
<p>Per generare dati coerenti con una distribuzione di probabilità, si parte dalla generazione di numeri casuali distribuiti uniformemente tra 0 e 1. Successivamente, si applica la funzione di distribuzione cumulativa <strong>inversa</strong> della distribuzione desiderata, in modo da trasformare i numeri casuali uniformi nei valori coerenti con la distribuzione target.</p>
</section>
<section id="studiare-la-distribuzione-di-un-campione" class="level2">
<h2 class="anchored" data-anchor-id="studiare-la-distribuzione-di-un-campione">Studiare la distribuzione di un campione</h2>
<p>Dato un campione di dati osservati</p>
<p>![[Pasted image 20250301184249 1.png|400]]</p>
<p>è possibile studiare la sua distribuzione attraverso l’istogramma dei dati</p>
<p>![[Pasted image 20250301184615 1.png|400]]</p>
<p>Oppure attraverso la <strong>funzione di ripartizione empirica</strong> (ECDF, Empirical Cumulative Distribution Function), una stima della funzione di ripartizione del campione. Per ottenere la ECDF a partire da un insieme di dati campionari, occorre ordinare i dati in ordine crescente.</p>
<p>![[Pasted image 20250302192343 1.png|400]]</p>
<p>Invertendo gli assi, otteniamo una CdF empirica “grossolana”</p>
<p>![[Pasted image 20250302192418 1.png|400]]</p>
<p>Scalando i dati tra 0 e 1, si ricava la ECDF, che approssima la CdF reale, che ha generato il campione</p>
<p>![[Pasted image 20250302192552 1.png|400]]</p>
<p>L’ECDF è utile per studiare la distribuzione dei dati osservati, e per visualizzare tale distribuzione in modo intuitivo.</p>
</section>
<section id="diagramma-q-q" class="level2">
<h2 class="anchored" data-anchor-id="diagramma-q-q">Diagramma Q-Q</h2>
<p>Il <strong>diagramma Q-Q (Quantile-Quantile)</strong> consente di confrontare la distribuzione di un insieme di dati con la distribuzione normale, mostrando sull’asse orizzontale i quantili teorici della distribuzione di riferimento e su quello verticale i quantili della distribuzione osservata. Se i dati seguono effettivamente una distribuzione normale, i punti del grafico si allineano lungo una retta, poiché i punti</p>
<p><span class="math display">\[\left(\Phi^{-1}\left(\dfrac{i-0.5}{n}\right), x_{(i)}\right)
\]</span></p>
<p>corrispondono ai quantili teorici, calcolati tramite la funzione inversa <span class="math inline">\(\Phi^{-1}\)</span> della distribuzione <span class="math inline">\(\mathcal{N}(0,1)\)</span>, e ai dati osservati ordinati.</p>
<p>![[Pasted image 20250302193324 1.png|400]]</p>
<p>Per costruire il diagramma, si parte da un insieme di dati con una qualsiasi distribuzione, li si ordina in modo crescente, si calcola la funzione di distribuzione cumulativa empirica (CdF empirica) e si confrontano i quantili empirici con quelli teorici della distribuzione normale.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>